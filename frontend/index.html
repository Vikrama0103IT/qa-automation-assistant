<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>QA Automation Assistant</title>

<style>
:root {
  --bg-main: #121426;
  --bg-card: #1b1f3b;
  --bg-input: #0f1228;
  --accent: #22e6ff;
  --accent-soft: rgba(34,230,255,0.25);
  --text-main: #e9efff;
  --text-muted: #9aa6d1;
  --radius: 14px;
}

* {
  box-sizing: border-box;
  font-family: "Segoe UI", system-ui, sans-serif;
}

body {
  margin: 0;
  height: 100vh;
  background: radial-gradient(circle at top, #1e2250, #0d0f22);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-main);
}

.app {
  width: 90%;
  max-width: 900px;
  background: var(--bg-card);
  border-radius: 22px;
  padding: 28px 30px 32px;
  box-shadow:
    0 0 0 1px rgba(34,230,255,0.15),
    0 25px 70px rgba(0,0,0,0.65);
}

.header {
  text-align: center;
  margin-bottom: 26px;
}

.header h1 {
  margin: 0;
  font-size: 2rem;
  font-weight: 700;
  color: var(--accent);
}

.label {
  color: var(--accent);
  font-size: 1.1rem;
  margin-bottom: 8px;
}

input {
  width: 100%;
  background: var(--bg-input);
  border: 1px solid transparent;
  color: var(--text-main);
  padding: 14px 16px;
  border-radius: var(--radius);
  font-size: 1rem;
  outline: none;
}

input::placeholder {
  color: var(--text-muted);
}

input:focus {
  border-color: var(--accent);
  box-shadow: 0 0 0 3px var(--accent-soft);
}

.actions {
  display: flex;
  gap: 12px;
  margin: 16px 0 22px;
}

button {
  border: none;
  padding: 10px 22px;
  font-size: 0.95rem;
  border-radius: 10px;
  cursor: pointer;
  font-weight: 600;
}

.btn-submit {
  background: var(--accent);
  color: #000;
}

.btn-clear {
  background: transparent;
  color: var(--accent);
  border: 1px solid var(--accent);
}

button:hover {
  opacity: 0.9;
}

.chat {
  background: linear-gradient(180deg, #171a3a, #10122c);
  border-radius: 16px;
  padding: 20px;
  min-height: 260px;
  max-height: 380px;
  overflow-y: auto;
  border: 1px solid rgba(255,255,255,0.05);
}

.message {
  padding: 12px 16px;
  border-radius: 12px;
  margin-bottom: 12px;
  max-width: 80%;
  line-height: 1.6;
  font-size: 0.95rem;
}

.message.user {
  background: #2a2f6b;
  margin-left: auto;
  color: #fff;
}

.message.bot {
  background: #21255a;
}

.chat::-webkit-scrollbar {
  width: 6px;
}
.chat::-webkit-scrollbar-thumb {
  background: var(--accent-soft);
  border-radius: 4px;
}

@media (max-width: 600px) {
  .app {
    padding: 22px 20px 26px;
  }
  .header h1 {
    font-size: 1.6rem;
  }
}
</style>
</head>

<body>

<div class="app">
  <div class="header">
    <h1>QA Automation Assistant</h1>
  </div>

  <div class="label">‚ùì Ask a QA / Automation Question</div>
  <input
    id="queryInput"
    type="text"
    placeholder="e.g. What is smoke testing? Write Selenium login test."
  />

  <div class="actions">
    <button class="btn-submit" onclick="submitQuery()">Submit</button>
    <button class="btn-clear" onclick="clearChat()">Clear</button>
  </div>

  <div class="chat" id="chatBox">
    <div class="message bot">
      üëã Hello! I help with Manual Testing, Automation, Selenium, Playwright, API testing, and QA interviews.
    </div>
  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const queryInput = document.getElementById("queryInput");
  const chatBox = document.getElementById("chatBox");

  async function submitQuery() {
    const question = queryInput.value.trim();
    if (!question) return;

    addMessage(question, "user");
    queryInput.value = "";

    const thinking = addMessage("ü§ñ Thinking...", "bot");

    try {
     const response = await fetch("/ask", {
  method: "POST",
  headers: {
    "Content-Type": "application/json"
  },
  body: JSON.stringify({ question })
});


      if (!response.ok) {
        throw new Error("Server error");
      }

      const data = await response.json();
      thinking.remove();

      if (data.answer) {
        addMessage(data.answer, "bot");
      } else {
        addMessage("‚ùå No response received.", "bot");
      }

    } catch (err) {
      thinking.remove();
      addMessage("‚ùå Backend connection failed.", "bot");
      console.error(err);
    }
  }

  function addMessage(text, type) {
    const div = document.createElement("div");
    div.className = "message " + type;
    div.innerText = text;
    chatBox.appendChild(div);
    chatBox.scrollTop = chatBox.scrollHeight;
    return div;
  }

  function clearChat() {
    chatBox.innerHTML =
      '<div class="message bot">üëã Hello! Ask me any QA Automation question.</div>';
  }

  window.submitQuery = submitQuery;
  window.clearChat = clearChat;

  queryInput.addEventListener("keydown", (e) => {
    if (e.key === "Enter") {
      e.preventDefault();
      submitQuery();
    }
  });
});
</script>

</body>
</html>
